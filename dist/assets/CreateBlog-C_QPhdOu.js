import{r as p,u as f,j as a}from"./index-Dtk-m6K2.js";function b(e){return new Promise((t,l)=>{var r=new Image;r.onload=function(){this.width>0?(console.log("image exists"),t(!0)):l(!1)},r.onerror=function(){console.log("image doesn't exist"),l(!1)},r.src=e})}function y(e){let t=localStorage.getItem("newblogData");t?t=JSON.parse(t):t=[];let l=localStorage.getItem("dataLength")+1;e.id=l,t.push(e),localStorage.setItem("newblogData",JSON.stringify(t))}const S=()=>{let e=new Date,t=String(e.getDate()).padStart(2,"0"),l=String(e.getMonth()+1).padStart(2,"0");return e=e.getFullYear()+"-"+l+"-"+t,e},w=()=>{const[e,t]=p.useState({}),l=f(),r=async o=>{o.preventDefault();const s=new FormData(o.currentTarget);let n={};const c=s.get("title"),g=s.get("subheading"),i=s.get("imageUrl"),d=s.get("content"),m=localStorage.getItem("author"),u=S(),h={title:c,subheading:g,imageUrl:i,content:d,author:m,publishedDate:u};c.trim().length===0&&(n.title="Title must be filled"),g.trim().length===0&&(n.subheading="Subheading must be filled"),d.trim().length>50||(n.content="Content should be greater that 50"),i.trim().length===0&&(n.imageUrl="Image url must be provided"),await b(i).then(x=>{console.log("Image exists:",x)}).catch(()=>{n.imageUrl="Correct image must be provided"}),Object.keys(n).length>0?t(n):(y(h),l("/"),t({}))};return a.jsxs("div",{children:[a.jsx("h3",{className:"text-3xl text-center",children:"Create a blog post"}),a.jsxs("form",{onSubmit:r,className:"flex gap-2 flex-col w-[40%] mx-auto my-10",children:[a.jsx("input",{type:"text",name:"title",placeholder:"Title of blog",className:"input input-bordered w-full "}),e.title&&a.jsx("div",{className:"text-red-500",children:e.title}),a.jsx("input",{type:"text",name:"subheading",placeholder:"Subheading",className:"input input-bordered w-full "}),e.subheading&&a.jsx("div",{className:"text-red-500",children:e.subheading}),a.jsx("input",{type:"text",name:"imageUrl",placeholder:"imageURL of hero image",className:"input input-bordered w-full "}),e.imageUrl&&a.jsx("div",{className:"text-red-500",children:e.imageUrl}),a.jsx("textarea",{name:"content",id:"blogContent",placeholder:"Write your article here",rows:15}),e.content&&a.jsx("div",{className:"text-red-500",children:e.content}),a.jsx("button",{type:"submit",className:"btn btn-circle w-full",children:" Create Post"})]})]})};export{w as default};
