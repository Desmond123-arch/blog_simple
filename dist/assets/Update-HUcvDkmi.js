import{a as b,r as y,u as j,j as a}from"./index-Dtk-m6K2.js";function w(l){return new Promise((t,e)=>{var n=new Image;n.onload=function(){this.width>0?(console.log("image exists"),t(!0)):e(!1)},n.onerror=function(){console.log("image doesn't exist"),e(!1)},n.src=l})}function S(l,t){let e=JSON.parse(localStorage.getItem("newblogData"));const n=e.findIndex(o=>o.id==t.id);Object.assign(t,l),e[n]=t,localStorage.setItem("newblogData",JSON.stringify(e))}const N=()=>{let l=new Date,t=String(l.getDate()).padStart(2,"0"),e=String(l.getMonth()+1).padStart(2,"0");return l=l.getFullYear()+"-"+e+"-"+t,l},D=()=>{const t=b().state,[e,n]=y.useState({}),o=j(),m=async c=>{c.preventDefault();const i=new FormData(c.currentTarget);let s={};const d=i.get("title"),g=i.get("subheading"),r=i.get("imageUrl"),u=i.get("content"),h=localStorage.getItem("author"),x=N(),f={title:d,subheading:g,imageUrl:r,content:u,author:h,publishedDate:x};d.trim().length===0&&(s.title="Title must be filled"),g.trim().length===0&&(s.subheading="Subheading must be filled"),u.trim().length>50||(s.content="Content should be greater that 50"),r.trim().length===0&&(s.imageUrl="Image url must be provided"),await w(r).then(p=>{console.log("Image exists:",p)}).catch(()=>{s.imageUrl="Correct image must be provided"}),Object.keys(s).length>0?n(s):(S(f,t),o("/"),n({}))};return a.jsxs("div",{children:[a.jsx("h3",{className:"text-3xl text-center",children:"Create a blog post"}),a.jsxs("form",{onSubmit:m,className:"flex gap-2 flex-col w-[40%] mx-auto my-10",children:[a.jsx("input",{type:"text",name:"title",placeholder:"Title of blog",className:"input input-bordered w-full ",defaultValue:t.title}),e.title&&a.jsx("div",{className:"text-red-500",children:e.title}),a.jsx("input",{type:"text",name:"subheading",placeholder:"Subheading",className:"input input-bordered w-full ",defaultValue:t.subheading}),e.subheading&&a.jsx("div",{className:"text-red-500",children:e.subheading}),a.jsx("input",{type:"text",name:"imageUrl",placeholder:"imageURL of hero image",className:"input input-bordered w-full ",defaultValue:t.imageUrl}),e.imageUrl&&a.jsx("div",{className:"text-red-500",children:e.imageUrl}),a.jsx("textarea",{name:"content",id:"blogContent",placeholder:"Write your article here",rows:15,defaultValue:t.content}),e.content&&a.jsx("div",{className:"text-red-500",children:e.content}),a.jsx("button",{type:"submit",className:"btn btn-circle w-full",children:" Update Post"})]})]})};export{D as default};
